---
const { url, name } = Astro.props;

interface Props {
  url: string;
  name: string;
}
---

<a
  id={url === "/" ? "home" : url.replace("/", "")}
  href={url}
  data-astro-prefetch
  class="rounded-lg px-3 py-2 text-base font-semibold text-gray-700 outline-hidden transition-all duration-300 ease-in-out hover:bg-red-50/90 focus-visible:ring-3 md:py-3 md:text-sm 2xl:text-base dark:text-white dark:hover:bg-red-950/20"
>
  {name}
</a>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let url = window.location.pathname;
    let navId;

    if (url === "/") {
      navId = "home";
    } else {
      navId = url.replace("/", "");
    }

    let nav = document.getElementById(navId);

    if (nav) {
      nav.classList.remove(
        "text-gray-700",
        "dark:text-white",
        "hover:[text-red-700]",
        "dark:hover:bg-red-950/20",
        "dark:hover:text-yellow-300",
        "rounded-lg"
      );
      nav.classList.add(
        "rounded-full",
        "px-4",
        "py-2",
        "transform",
        "scale-105",
        "shadow-sm"
      );

      (nav as HTMLElement).style.backgroundColor =
        document.documentElement.classList.contains("dark")
          ? "#2c2e2f"
          : "#dcdcde";
      (nav as HTMLElement).style.color =
        document.documentElement.classList.contains("dark")
          ? "#ffffff"
          : "#343A40";

      nav.setAttribute("aria-current", "page");
    }

    function updateActiveNavColors() {
      const activeNav = document.querySelector(
        '[aria-current="page"]'
      ) as HTMLElement;
      if (activeNav) {
        const isDark = document.documentElement.classList.contains("dark");
        activeNav.style.backgroundColor = isDark ? "#2c2e2f" : "#dcdcde";
        activeNav.style.color = isDark ? "#ffffff" : "#343A40";
      }
    }

    const observer = new MutationObserver(updateActiveNavColors);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    });

    window.addEventListener("on-hs-appearance-change", updateActiveNavColors);
  });
</script>
